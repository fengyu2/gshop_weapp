"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Util=void 0;var _api=require("./api.js"),_dialog=require("../lib/dialog.js"),_index=require("../npm/@tarojs/taro-weapp/index.js"),_index2=_interopRequireDefault(_index);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var Util=exports.Util={setStore:function(e){_api.Api.process("store/change",{id:e},function(e){_index2.default.reLaunch({url:"/pages/index"})})},currentStore:function(t,i){_api.Api.process("store/current",{},function(e){t.setState({store:e.data}),i&&i(e.data)})},orderPay:function(e,i,r){_api.Api.process("member_order/pay_create",{id:e,payType:"wechat_mini_program"},function(e){try{var t=JSON.parse(e.data.json);wx.requestPayment({timeStamp:t.timeStamp,nonceStr:t.nonceStr,package:t.package,signType:t.signType,paySign:t.paySign,success:function(e){"requestPayment:ok"===e.errMsg?(_dialog.Dialog.tipSuccess("支付成功"),setTimeout(function(){i()},2e3)):(_dialog.Dialog.tipError("付款失败（"+e.errMsg+")"),setTimeout(function(){r()},2e3))},fail:function(e){"requestPayment:fail cancel"===e.errMsg?_dialog.Dialog.tipError("付款取消"):_dialog.Dialog.tipError("付款失败（"+e.errMsg+")"),setTimeout(function(){r()},2e3)}})}catch(e){_dialog.Dialog.tipError("付款失败"),setTimeout(function(){r()},2e3)}})}};