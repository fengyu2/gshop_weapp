"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ApiWeapp=void 0;var _taro=require("./taro.js"),_dialog=require("./dialog.js"),_api=require("./api.js"),ApiWeapp={login:function(o){_dialog.Dialog.loadingOn(),_taro.Taro.login({fail:function(i){_dialog.Dialog.loadingOff(),_api.Api.debug("ApiWeapp.login -> fail("+JSON.stringify(i)+")"),_dialog.Dialog.tipError("启动失败")},success:function(i){_api.Api.debug(">> >> ApiWeapp.login -> success"),_api.Api.debug(">> >> ",i),i.code?(_dialog.Dialog.loadingOff(),o&&o(i.code)):(_dialog.Dialog.loadingOff(),_dialog.Dialog.tipError("启动失败"))}})},loginOauth:function(i,a){"getUserInfo:ok"===i.errMsg?(_dialog.Dialog.loadingOn(),wx.login({success:function(i){if(_api.Api.debug(">> >> ApiWeapp.oauthLogin -> login.success"),_api.Api.debug(">> >> ",i),i.code){var o=i.code;wx.getUserInfo({withCredentials:!0,success:function(i){_api.Api.debug(">> >> >> ApiWeapp.oauthLogin -> getUserInfo.success"),_api.Api.debug(">> >> >> ",i),_api.Api.process("member_auth/oauth_login_wxapp",{code:o,encryptedData:i.encryptedData,iv:i.iv},function(i){_dialog.Dialog.loadingOff(),a&&a(i)},function(i){_dialog.Dialog.loadingOff(),_dialog.Dialog.tipError("登录微信失败"),_api.Api.debug(">> >> >> ApiWeapp.oauthLogin -> getUserInfo.fail"),_api.Api.debug(">> >> >> ",i)})},fail:function(i){_dialog.Dialog.loadingOff(),_dialog.Dialog.tipError("登录微信失败:"+JSON.stringify(i)),_api.Api.debug(">> >> >> ApiWeapp.oauthLogin -> getUserInfo.fail("+JSON.stringify(i)+")")}})}else _dialog.Dialog.loadingOff(),_dialog.Dialog.tipError("登录微信失败")},fail:function(i){_dialog.Dialog.loadingOff(),_dialog.Dialog.tipError("登录微信失败"),_api.Api.debug(">> >> ApiWeapp.oauthLogin -> login.fail("+JSON.stringify(i)+")")}})):_dialog.Dialog.tipError("登录微信失败")}};exports.ApiWeapp=ApiWeapp;