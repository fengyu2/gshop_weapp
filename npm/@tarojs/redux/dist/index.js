"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var store=null;function getStore(){return store}function setStore(t){store=t}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _createClass(t,e,r){return e&&_defineProperties(t.prototype,e),r&&_defineProperties(t,r),t}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _possibleConstructorReturn(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?_assertThisInitialized(t):e}function _superPropBase(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=_getPrototypeOf(t)););return t}function _get(t,e,r){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var o=_superPropBase(t,e);if(o){var n=Object.getOwnPropertyDescriptor(o,e);return n.get?n.get.call(r):n.value}})(t,e,r||t)}function shallowEqual(t,e){if(null===t&&null===e)return!0;if(null===t||null===e)return!1;if(Object.is(t,e))return!0;var r=t?Object.keys(t):[],o=e?Object.keys(e):[];if(r.length!==o.length)return!1;for(var n=0;n<r.length;n++){var i=r[n];if(!e.hasOwnProperty(i)||!Object.is(t[i],e[i]))return!1}return!0}function isObject(t){return null!=t&&"object"===_typeof(t)&&!Array.isArray(t)}function mergeObjects(t,e){var r=Object.assign({},t);if(isObject(t)&&isObject(e))for(var o in e)isObject(t[o])&&isObject(e[o])?r[o]=mergeObjects(t[o],e[o]):r[o]=e[o];return r}function isEqual(t,e){var r=_typeof(t);return r===_typeof(e)&&("object"===r?shallowEqual(t,e):t===e)}function wrapPropsWithDispatch(o,n){return"function"==typeof o?o(n):isObject(o)?Object.keys(o).reduce(function(t,e){var r=o[e];return"function"==typeof r&&(t[e]=function(){return n(r.apply(void 0,arguments))}),t},{}):{}}function connect(i,t){var c=getStore(),e=c.dispatch,s=wrapPropsWithDispatch(t,e);s.dispatch=e;return function(e){var t=i(c.getState(),e.defaultProps||{});e.properties&&t&&Object.keys(t).forEach(function(t){delete e.properties[t]});var o=null;return function(t){function r(t){var e;return _classCallCheck(this,r),e=_possibleConstructorReturn(this,_getPrototypeOf(r).call(this,Object.assign.apply(Object,Array.prototype.slice.call(arguments).concat([mergeObjects(i(c.getState(),t),s)])))),Object.keys(s).forEach(function(t){e["__event_".concat(t)]=s[t]}),e}return _inherits(r,e),_createClass(r,[{key:"componentWillMount",value:function(){var t=getStore();Object.assign(this.props,mergeObjects(i(t.getState(),this.props),s)),o=t.subscribe(function(){var r=this,o=!1,n=i(c.getState(),this.props),t=Object.assign({},this.props);Object.keys(n).forEach(function(t){var e=n[t];isObject(e)&&isObject(s[t])&&(e=mergeObjects(e,s[t])),isEqual(r.props[t],e)||(r.props[t]=e,o=!0)}),o&&(this.prevProps=t,this._unsafeCallUpdate=!0,this.forceUpdate(function(){delete r._unsafeCallUpdate}))}.bind(this)),_get(_getPrototypeOf(r.prototype),"componentWillMount",this)&&_get(_getPrototypeOf(r.prototype),"componentWillMount",this).call(this)}},{key:"componentWillUnmount",value:function(){_get(_getPrototypeOf(r.prototype),"componentWillUnmount",this)&&_get(_getPrototypeOf(r.prototype),"componentWillUnmount",this).call(this),o&&o(),o=null}}]),r}()}}Object.is=Object.is||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e};var Provider=function t(){_classCallCheck(this,t)},index$1={connect:connect,Provider:Provider,getStore:getStore,setStore:setStore};exports.default=index$1,exports.connect=connect,exports.Provider=Provider,exports.getStore=getStore,exports.setStore=setStore;